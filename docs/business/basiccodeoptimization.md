# 标准指令优化

对常见的代码范式进行谨慎可靠的优化，大幅提升了变量访问（50%-100%）、数值计算（100-300%）、对象访问（50-200%）等常见指令的性能，像一些特殊代码如typeof指令的性能，提升了1000%以上。

## 实现

由于运行时的时间及内存限制，标准指令优化只做一些无用栈消除、窥孔优化等等简单但较可靠的优化，无法执行一些复杂的优化。但由于IL指令是栈指令，即使只做了一些不复杂的常见优化，性能相比于社区的未优化版本也有巨幅提升。

[高级指令优化](./advancedcodeoptimization)相对标准指令优化，使用了复杂的离线优化技术，性能大幅优于标准指令优化技术。

## 性能数据

以下是标准指令优化相比于社区版本的解释性能提升数据（0表示性能持平，n表示提升n倍）。

![interpreter_optimization](/img/hybridclr/interpreter_optimization.jpg)

以下是数值计算方面原生与标准指令优化的性能对比，纵坐标为耗时。标准指令优化的加法大约为原生7-16倍左右，乘法是4倍，除法是2倍。

![benchmark_numeric](/img/hybridclr/benchmark_numeric.jpg)
